var deThi = [{
  "_id": "5eefac74fc13ae50e4000000",
  "code": "Q01",
  "question": "tincidunt eu felis fusce posuere felis sed lacus morbi sem mauris laoreet ut rhoncus aliquet pulvinar sed nisl nunc rhoncus dui vel sem sed",
  "a": "Câu đúng",
  "b": "mi pede malesuada in imperdiet et commodo vulputate justo in blandit ultrices enim lorem ipsum",
  "c": "amet diam in magna bibendum imperdiet nullam orci pede venenatis non sodales",
  "d": "congue vivamus metus arcu adipiscing molestie hendrerit at vulputate vitae nisl aenean lectus",
  "true": "a"
},
{
  "_id": "5eefac74fc13ae50e4000001",
  "code": "Q02",
  "question": "cursus id turpis integer aliquet massa id lobortis convallis tortor risus dapibus augue vel accumsan tellus nisi eu orci mauris lacinia sapien quis libero nullam sit",
  "a": "Câu đúng",
  "b": "orci eget orci vehicula condimentum curabitur in libero ut massa volutpat",
  "c": "est phasellus sit amet erat nulla tempus vivamus in felis eu sapien cursus vestibulum",
  "d": "neque libero convallis eget eleifend luctus ultricies eu nibh quisque id justo sit amet",
  "true": "a"
},
{
  "_id": "5eefac74fc13ae50e4000002",
  "code": "Q03",
  "question": "pretium quis lectus suspendisse potenti in eleifend quam a odio in hac habitasse platea dictumst maecenas ut massa quis augue luctus",
  "a": "ipsum integer a nibh in quis justo maecenas rhoncus aliquam",
  "b": "Câu đúng",
  "c": "amet justo morbi ut odio cras mi pede malesuada in imperdiet et commodo vulputate",
  "d": "in quis justo maecenas rhoncus aliquam lacus morbi quis tortor",
  "true": "b"
},
{
  "_id": "5eefac74fc13ae50e4000003",
  "code": "Q04",
  "question": "accumsan tellus nisi eu orci mauris lacinia sapien quis libero nullam sit amet turpis elementum ligula vehicula consequat morbi a ipsum integer",
  "a": "Câu đúng",
  "b": "augue quam sollicitudin vitae consectetuer eget rutrum at lorem integer",
  "c": "erat quisque erat eros viverra eget congue eget semper rutrum",
  "d": "eu tincidunt in leo maecenas pulvinar lobortis est phasellus sit",
  "true": "a"
},
{
  "_id": "5eefac74fc13ae50e4000004",
  "code": "Q05",
  "question": "vestibulum sagittis sapien cum sociis natoque penatibus et magnis dis parturient montes nascetur ridiculus mus etiam vel augue vestibulum rutrum rutrum neque aenean auctor gravida sem praesent id massa id",
  "a": "pellentesque at nulla suspendisse potenti cras in purus eu magna vulputate luctus cum sociis natoque",
  "b": "Câu đúng",
  "c": "amet eleifend pede libero quis orci nullam molestie nibh in lectus pellentesque at nulla suspendisse",
  "d": "mauris morbi non lectus aliquam sit amet diam in magna bibendum imperdiet",
  "true": "b"
},
{
  "_id": "5eefac74fc13ae50e4000005",
  "code": "Q06",
  "question": "nam nulla integer pede justo lacinia eget tincidunt eget tempus vel pede morbi porttitor lorem id ligula suspendisse ornare consequat lectus in est risus auctor sed",
  "a": "aliquet ultrices erat tortor sollicitudin mi sit amet lobortis sapien sapien non mi integer ac",
  "b": "eleifend luctus ultricies eu nibh quisque id justo sit amet sapien dignissim vestibulum vestibulum",
  "c": "Câu đúng",
  "d": "id ornare imperdiet sapien urna pretium nisl ut volutpat sapien arcu sed",
  "true": "c"
},
{
  "_id": "5eefac74fc13ae50e4000006",
  "code": "Q07",
  "question": "tortor sollicitudin mi sit amet lobortis sapien sapien non mi integer ac neque duis bibendum morbi non quam nec dui luctus rutrum nulla tellus in sagittis",
  "a": "habitasse platea dictumst maecenas ut massa quis augue luctus tincidunt nulla",
  "b": "enim in tempor turpis nec euismod scelerisque quam turpis adipiscing lorem vitae mattis nibh",
  "c": "Câu đúng",
  "d": "auctor sed tristique in tempus sit amet sem fusce consequat nulla",
  "true": "c"
},
{
  "_id": "5eefac74fc13ae50e4000007",
  "code": "Q08",
  "question": "ultrices erat tortor sollicitudin mi sit amet lobortis sapien sapien non mi integer ac neque duis bibendum morbi non quam nec dui luctus rutrum nulla tellus",
  "a": "vel sem sed sagittis nam congue risus semper porta volutpat quam pede lobortis",
  "b": "nam ultrices libero non mattis pulvinar nulla pede ullamcorper augue a",
  "c": "Câu đúng",
  "d": "nulla tellus in sagittis dui vel nisl duis ac nibh fusce lacus purus aliquet at",
  "true": "c"
},
{
  "_id": "5eefac74fc13ae50e4000008",
  "code": "Q09",
  "question": "non lectus aliquam sit amet diam in magna bibendum imperdiet nullam orci pede venenatis non sodales sed tincidunt eu felis fusce posuere felis sed lacus morbi sem",
  "a": "id justo sit amet sapien dignissim vestibulum vestibulum ante ipsum primis in",
  "b": "ut massa volutpat convallis morbi odio odio elementum eu interdum eu tincidunt in",
  "c": "faucibus cursus urna ut tellus nulla ut erat id mauris vulputate",
  "d": "Câu đúng",
  "true": "d"
},
{
  "_id": "5eefac74fc13ae50e4000009",
  "code": "Q10",
  "question": "tempus vel pede morbi porttitor lorem id ligula suspendisse ornare consequat lectus in est risus auctor sed tristique in tempus sit amet sem fusce",
  "a": "Câu đúng",
  "b": "sed lacus morbi sem mauris laoreet ut rhoncus aliquet pulvinar sed nisl nunc rhoncus dui",
  "c": "quis orci nullam molestie nibh in lectus pellentesque at nulla suspendisse potenti",
  "d": "arcu libero rutrum ac lobortis vel dapibus at diam nam tristique tortor",
  "true": "a"
}
]

var userAnwsers = [
  {
    code: 'Q01',
    answer: 'a',
    isTrue: false,
    _id: '5ef5c54a1f7b472a2c9ed043'
  },
  {
    code: 'Q02',
    answer: 'b',
    isTrue: false,
    _id: '5ef5c54a1f7b472a2c9ed044'
  },
  {
    code: 'Q03',
    answer: 'b',
    isTrue: false,
    _id: '5ef5c54a1f7b472a2c9ed045'
  },
  {
    code: 'Q04',
    answer: 'c',
    isTrue: false,
    _id: '5ef5c54a1f7b472a2c9ed046'
  },
  {
    code: 'Q05',
    answer: 'b',
    isTrue: false,
    _id: '5ef5c54a1f7b472a2c9ed047'
  },
  {
    code: 'Q06',
    answer: 'c',
    isTrue: false,
    _id: '5ef5c54a1f7b472a2c9ed048'
  },
  {
    code: 'Q07',
    answer: 'c',
    isTrue: false,
    _id: '5ef5c54a1f7b472a2c9ed049'
  },
  {
    code: 'Q08',
    answer: 'c',
    isTrue: false,
    _id: '5ef5c54a1f7b472a2c9ed04a'
  },
  {
    code: 'Q09',
    answer: null,
    isTrue: false,
    _id: '5ef5c54a1f7b472a2c9ed04b'
  },
  {
    code: 'Q10',
    answer: 'a',
    isTrue: false,
    _id: '5ef5c54a1f7b472a2c9ed04c'
  }
]

var filteredDeThi = []
var filteredUserAnwsers = []

// console.log(deThi)
// console.log(userAnwsers)

for (const iterator of deThi) {
  filteredDeThi.push({ code: iterator.code, answer: iterator.true })
}
for (const iterator of userAnwsers) {
  if (iterator.answer !== null) { filteredUserAnwsers.push({ code: iterator.code, answer: iterator.answer }) }
}

// console.log('filteredDeThi')
// console.log(filteredDeThi)
// console.log('filteredUserAnwsers')
// console.log(filteredUserAnwsers)

function compareArray(array1, array2) {
  let result = []
  array1.forEach(e1 => array2.forEach(e2 => {
    if (e1.code === e2.code) {
      if (e1.answer === e2.answer) {
        // console.log(e1, e2);
        result.push(e1)
      }
    }
  }))
  return result
}

const result = compareArray(filteredUserAnwsers, filteredDeThi)
console.log('filteredDeThi', 'filteredUserAnwsers', 'result')
console.log(filteredDeThi, filteredUserAnwsers, result, result.length)
